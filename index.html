

<!DOCTYPE html>
<html>
  <head>
    <title>Фото-Клик AI: Ваша персональная фотосессия</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Создавайте профессиональные фотосессии и невероятные вариации ваших снимков с помощью искусственного интеллекта. Загрузите фото и преобразите его за секунды!">
    
    <!-- PWA & Icons -->
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" href="/icon-192.png">
    <link rel="apple-touch-icon" href="/icon-192.png">
    <meta name="theme-color" content="#191423">
    
    <!-- Open Graph Meta Tags for Social Media Previews -->
    <meta property="og:title" content="Фото-Клик AI: Ваша персональная фотосессия" />
    <meta property="og:description" content="Создавайте профессиональные фотосессии и невероятные вариации ваших снимков с помощью искусственного интеллекта. Загрузите фото и преобразите его за секунды!" />
    <meta property="og:image" content="https://photo-click-ai.ru/og-image.png" />
    <meta property="og:url" content="https://photo-click-ai.ru" />
    <meta property="og:type" content="website" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/index.css" />

<script type="importmap">
{
  "imports": {
    "cors": "https://aistudiocdn.com/cors@^2.8.5",
    "url": "https://aistudiocdn.com/url@^0.11.4",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.1",
    "idb": "https://aistudiocdn.com/idb@^8.0.3",
    "crypto": "https://aistudiocdn.com/crypto@^1.0.1",
    "path": "https://aistudiocdn.com/path@^0.12.7",
    "vite": "https://aistudiocdn.com/vite@^7.2.2",
    "dotenv": "https://aistudiocdn.com/dotenv@^17.2.3",
    "express": "https://aistudiocdn.com/express@^5.1.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.29.1",
    "google-auth-library": "https://aistudiocdn.com/google-auth-library@^10.5.0",
    "module": "https://aistudiocdn.com/module@^2.0.0",
    "lowdb/": "https://aistudiocdn.com/lowdb@^7.0.1/",
    "lowdb": "https://aistudiocdn.com/lowdb@^7.0.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "jsonwebtoken": "https://aistudiocdn.com/jsonwebtoken@^9.0.2",
    "https": "https://aistudiocdn.com/https@^1.0.0",
    "https-proxy-agent": "https://aistudiocdn.com/https-proxy-agent@^7.0.6",
    "socks-proxy-agent": "https://aistudiocdn.com/socks-proxy-agent@^8.0.5"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
  <body class="antialiased">
    <div
      class="min-h-screen flex items-center justify-center p-4"
      role="main"
    >
      <div
        class="app-container px-8 pt-8 pb-6 rounded-2xl shadow-2xl w-full max-w-5xl"
      >
        <!-- Combined Header: Promo, Nav, Credits -->
        <div class="flex flex-wrap items-center justify-between gap-4 border-b border-[var(--border-color)] mb-6 pb-4">
            <!-- Left: Promo Code -->
            <div id="promo-code-container" class="order-1 flex items-center gap-1 bg-black/30 backdrop-blur-sm p-1 rounded-full text-sm">
                <input type="text" id="promo-code-input" placeholder="Промокод" class="bg-transparent focus:outline-none placeholder-gray-400 w-24 sm:w-28 px-2 appearance-none">
                <button id="apply-promo-button" class="promo-button">Применить</button>
            </div>

            <!-- Center: App Navigation -->
            <nav id="app-nav" class="order-3 sm:order-2 w-full sm:w-auto flex flex-wrap justify-center gap-2">
              <button data-page="page-business" class="nav-button active">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2.25a3 3 0 013-3v1h2a2 2 0 012 2v9a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h2zm2.5-.5a.5.5 0 01.5-.5h3a.5.5 0 01.5.5V6h-4v-.5z" clip-rule="evenodd" />
                </svg>
                <span>Бизнес</span>
              </button>
              <button data-page="page3" class="nav-button">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"></path>
                 </svg>
                 <span>История</span>
              </button>
            </nav>

            <!-- Right side: Credits & Auth -->
            <div class="order-2 sm:order-3 flex items-center gap-4">
                <div id="credit-counter" class="shrink-0 credit-counter-glow bg-black/30 backdrop-blur-sm px-3 py-1.5 rounded-full text-base font-semibold flex items-center gap-1.5 cursor-pointer" title="Пополнить кредиты">
                    <!-- SVG and spans will be inserted here by JS -->
                </div>
                <div id="auth-container" class="shrink-0">
                     <!-- Auth Buttons Wrapper -->
                     <div id="auth-buttons" class="flex items-center gap-2">
                        <div id="telegram-login-container">
                            <!-- Telegram Button will be rendered here by JS -->
                        </div>
                        <div id="google-signin-container">
                             <!-- Google Button will be rendered here by JS -->
                        </div>
                     </div>
                     
                     <div id="user-profile-container" class="hidden items-center gap-2 cursor-pointer p-1 pr-3 rounded-full hover:bg-white/10 transition-colors border border-[var(--border-color)]" title="Выйти">
                         <img id="user-profile-image" class="h-9 w-9 rounded-full object-cover" src="" alt="Аватар пользователя" />
                         <span id="user-profile-name" class="hidden lg:block text-sm font-semibold"></span>
                     </div>
                 </div>
            </div>
        </div>
        
        <!-- NEW PAGE: Business -->
        <div id="page-business" class="page-content">
           <div class="text-center">
             <h1 class="app-title tracking-tight">КАРТОЧКИ ТОВАРОВ</h1>
             <p class="text-gray-400 mt-4 text-sm max-w-2xl mx-auto leading-relaxed">
                <span class="block text-base font-medium mb-1 text-[var(--font-color)]">Превратите обычное фото в 4 продающие карточки для Wildberries и VK за 1 клик.</span>
                ИИ сам подберет дорогой фон, улучшит модель, напишет продающий текст и добавит стильную инфографику. Экономьте на фотосессиях и дизайнерах.
             </p>
           </div>
           
           <div class="mt-8 flex flex-col md:flex-row gap-4 items-stretch justify-center">
                <!-- Product Uploader (Main) -->
                <div class="flex-1 flex flex-col gap-2">
                    <p class="text-center font-bold text-[var(--font-color)]">Фото Товара (Главное)</p>
                    <div id="business-upload-product" class="page1-window-upload w-full h-64 cursor-pointer relative">
                        <div id="business-placeholder-product" class="flex flex-col items-center justify-center h-full">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
                           <p class="text-sm text-gray-500 mt-2">Загрузить товар</p>
                        </div>
                        <img id="business-preview-product" class="hidden h-full w-full object-contain rounded-lg" />
                        <input type="file" id="business-input-product" class="hidden" accept="image/png, image/jpeg, image/webp" />
                        <button id="business-clear-product" class="clear-button hidden"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg></button>
                    </div>
                </div>

                <!-- Reference 1 -->
                <div class="flex-1 flex flex-col gap-2">
                    <p class="text-center font-bold text-[var(--font-color)]">Референс 1 (Логотип/Фон)</p>
                    <div id="business-upload-ref1" class="page1-window-upload w-full h-64 cursor-pointer relative">
                        <div id="business-placeholder-ref1" class="flex flex-col items-center justify-center h-full">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                           <p class="text-sm text-gray-500 mt-2">Загрузить пример</p>
                        </div>
                        <img id="business-preview-ref1" class="hidden h-full w-full object-cover rounded-lg" />
                        <input type="file" id="business-input-ref1" class="hidden" accept="image/png, image/jpeg, image/webp" />
                        <button id="business-clear-ref1" class="clear-button hidden"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg></button>
                    </div>
                </div>

                <!-- Reference 2 -->
                <div class="flex-1 flex flex-col gap-2">
                    <p class="text-center font-bold text-[var(--font-color)]">Референс 2 (Окружение)</p>
                    <div id="business-upload-ref2" class="page1-window-upload w-full h-64 cursor-pointer relative">
                         <div id="business-placeholder-ref2" class="flex flex-col items-center justify-center h-full">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                           <p class="text-sm text-gray-500 mt-2">Загрузить пример</p>
                        </div>
                        <img id="business-preview-ref2" class="hidden h-full w-full object-cover rounded-lg" />
                        <input type="file" id="business-input-ref2" class="hidden" accept="image/png, image/jpeg, image/webp" />
                        <button id="business-clear-ref2" class="clear-button hidden"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg></button>
                    </div>
                </div>
           </div>

           <div class="mt-6 w-full max-w-2xl mx-auto">
               <label for="business-prompt-input" class="block text-left font-bold text-[var(--font-color)] mb-2">
                   Промпт для генерации (можно редактировать):
               </label>
               <textarea id="business-prompt-input" rows="12" class="page1-text-input w-full font-medium" style="color: black !important; background-color: rgba(255,255,255,0.95);" placeholder="Добавь ...на изображение 2,добавь ...на изображение 3,добавь... на изображение 4.">Интегрируй стильное название товара на русском языке (премиальный шрифт) в изображение №1 с моделью. На изображениях 2,3,4 добавь продающую инфографику: ключевые преимущества и параметры товара. Используй интерактивные полупрозрачные 3D-элементы , гармонично вписанные в фон и выполненные в одном стиле который должен быть на русском, строго читабельным, побуждающим к покупке и отличающимся на каждом изображении. Обеспечь естественное взаимодействие модели с товаром.</textarea>
               <button id="generate-business-button" class="btn-primary w-full mt-4">
                  Создать карточки товара (4 вариации)
               </button>
           </div>
           
           <!-- Reuse output gallery for business results -->
           <div class="w-full mt-6">
             <div id="business-output-gallery" class="grid grid-cols-2 gap-4 items-start"></div>
           </div>
        </div>

        <!-- Page 3: History -->
        <div id="page3" class="page-content hidden">
            <div class="text-center">
                <h1 class="app-title tracking-tight">
                    История генераций
                </h1>
                <p class="text-gray-400 mt-2 text-sm">
                    Здесь хранятся 50 ваших последних генераций.
                </p>
            </div>
            <div class="w-full mt-6">
                <div id="history-gallery" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 items-start">
                  <!-- History images will be injected here -->
                </div>
            </div>
        </div>


        <footer class="app-footer">
          <p>Самозанятый: Кайгородов Дмитрий Николаевич | ИНН: 666002617267</p>
          <p>Для связи: WhatsApp +79292216920</p>
          <div class="footer-links">
            <a href="#">Пользовательское соглашение</a>
            <span>&bull;</span>
            <a href="#">Политика конфиденциальности</a>
          </div>
        </footer>

      </div>
    </div>
    
    <!-- Lightbox Modal -->
    <div id="lightbox-overlay" class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 opacity-0 pointer-events-none transition-opacity duration-300 p-4">
      <img id="lightbox-image" src="" class="max-w-full max-h-full object-contain" alt="Увеличенное изображение" />
      <button id="lightbox-close-button" class="lightbox-close-btn">Свернуть</button>
    </div>
    
    <!-- Payment Modal -->
    <div id="payment-modal-overlay" class="payment-modal-overlay hidden">
      <div class="payment-modal-content">
        <button id="payment-close-button" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors" title="Закрыть">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
        
        <!-- Step 1: Selection -->
        <div id="payment-selection-view">
            <div class="text-center">
                <h2 id="payment-modal-title" class="text-2xl font-bold mb-2">Разблокируйте больше фотографий!</h2>
                <p id="payment-modal-description" class="mb-6">Пополните баланс, чтобы продолжить генерацию.</p>
            </div>
            
            <div class="bg-gray-800/50 border border-[var(--border-color)] rounded-lg p-6 flex flex-col items-center gap-4">
                 <div class="w-full text-center">
                     <p class="text-sm mb-2">Выберите тариф:</p>
                     
                     <div class="flex flex-col gap-3 w-full mb-6">
                         <!-- Пакет "Стандарт" -->
                         <div id="plan-small" class="payment-plan-card selected p-4 rounded-lg border-2 border-[var(--secondary-color)] bg-[var(--bg-color)] cursor-pointer flex justify-between items-center transition-all">
                             <div>
                                 <p class="font-bold text-lg">12 Фотографий</p>
                                 <p class="text-sm text-gray-500">Попробовать</p>
                             </div>
                             <p class="font-bold text-xl">129 ₽</p>
                         </div>

                         <!-- Пакет "PRO" -->
                         <div id="plan-large" class="payment-plan-card p-4 rounded-lg border border-[var(--border-color)] hover:border-[var(--secondary-color)] bg-[var(--bg-color)] cursor-pointer flex justify-between items-center transition-all relative overflow-hidden">
                             <div class="absolute top-0 right-0 bg-[#E0C9A6] text-black text-[10px] px-2 py-0.5 font-bold rounded-bl-lg">ВЫГОДНО</div>
                             <div>
                                 <p class="font-bold text-lg">60 Фотографий</p>
                                 <p class="text-sm text-gray-500">Большая фотосессия</p>
                             </div>
                             <p class="font-bold text-xl">500 ₽</p>
                         </div>
                     </div>
                 </div>
                 
                 <div class="w-full h-px bg-[var(--border-color)] my-2"></div>

                 <button id="payment-proceed-button" class="btn-primary w-full mt-4">
                     Перейти к оплате 129 ₽
                 </button>
            </div>
        </div>

        <!-- Step 2: Processing / Loading -->
        <div id="payment-processing-view" class="hidden text-center py-12">
            <div class="loading-spinner large mx-auto"></div>
            <p class="mt-4 font-semibold">Перенаправляем на страницу оплаты...</p>
            <p class="text-sm mt-1">Это может занять несколько секунд.</p>
        </div>

        <!-- Step 2b: QR Code Display -->
        <div id="payment-qr-view" class="hidden text-center py-4">
            <h2 class="text-xl font-bold mb-2">Оплата через SberPay</h2>
            <p class="mb-4">Отсканируйте QR-код в приложении СберБанк Онлайн</p>
            <div class="bg-white p-2 rounded-lg inline-block">
                <img id="payment-qr-image" src="" alt="QR-код для оплаты" class="w-48 h-48 mx-auto" />
            </div>
            <p class="text-2xl font-bold mt-4">129 ₽</p>
            <button id="payment-back-button" class="btn-secondary w-full mt-6">Выбрать другой способ</button>
        </div>

        <!-- Step 3: Final Confirmation -->
        <div id="payment-final-view" class="hidden text-center">
            <h2 class="text-2xl font-bold mb-4">Подтверждение оплаты</h2>
            <div class="bg-gray-800/50 border border-[var(--border-color)] rounded-lg p-6 flex flex-col items-center gap-4">
                <p>Вы собираетесь оплатить <strong>129 ₽</strong> за пакет <strong>"12 фотографий"</strong>.</p>
                <p class="text-xs text-gray-500">Это симуляция. Нажмите "Оплатить" для получения кредитов.</p>
                <button id="payment-confirm-button" class="btn-primary w-full mt-4" style="background: linear-gradient(45deg, #10B981, #34D399);">
                    Оплатить 129 ₽
                </button>
            </div>
        </div>
      </div>
    </div>
    
    <!-- Main application script -->
    <script type="module" src="/index.tsx"></script>
    
  </body>
</html>